{% extends 'layout.html' %}

{% block mainContent %}
<style>
    .text-align{
        text-align: center;
    }



</style>
<div class="container" style="background-color: lightgray">
    <h4>Details for {{cdetails['cust_name']}}</h4>
    <h6>{{cdetails['cust_no']}}</h6>
    <hr>
    <p>{{cdetails['street']}}<br>
    {{cdetails['town']}} {{cdetails['post_code']}}</p>
    <p>Credit Limit ${{cdetails['cr_limit']}}<br>
    Current Balance: <strong>${{cdetails['curr_bal']}}</strong></p>

    <div>
        <h4>Order Summary</h4>
        <p>Total number of orders made: {{ocount['order count']}} </p>
        <p>Last order: {{ocount['last order']}}</p>
        <p>Total Order Price: <strong>${{ocount['total price']}}</strong></p>
    </div>
        <br>

    <div>
        <h4>Order History</h4>
        {% if order_history|length > 0 %}
            <table  class="table table-dark text-align">
                <tr class="h5">
                    <th>Order Date</th>
                    <th>Order Number</th>
                </tr>
                {% for row in order_history %}
                    <tr>
                        <td>{{row['order_date']}}</td>
                        <td><a href="/order_details?oid={{row['order_no']}}">{{row['order_no']}}</a></td>
                    </tr>
                {% endfor %}
                </table>
        {% else %}
                <p>No orders made</p>
        {% endif %}
    </div>
    <div class="d-flex justify-content-center">
      <div class="spinner-border" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
</div>
{% endblock %}